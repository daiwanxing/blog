<script setup>
import isExampleComponent from './components/_is.vue';
</script>

# CSS3 新伪类选择器

emmmm，先复习下什么是伪类选择器。在 CSS 中，伪类选择器一般以冒号 `:` 开头，并接着紧跟着表示状态或者位置的关键字。

例如：

-  `:hover`
-  `:first-child`
-  `:active`

有些伪类选择器，还支持传入特定的参数，用于精确的匹配元素的位置。

例如：

-  `:nth-child(odd)` 表示匹配所有元素出现的位置为奇数
-  `:not(:empty)` 表示匹配元素的内容为非空的位置

这些嘛都不是本文要说的内容，只是做个简单的回顾。

本文主要聊聊 CSS3 中的几个新的伪类选择器，分别是 `:has()`、`:is()`、`:where()`。

## `:is()`

`:is()` 伪类选择器可以接收一组选择器列表作为参数（参数用逗号分隔），并能够选择列表中任意一个可匹配的元素应用样式规则。这个是非常有用的一个伪类选择器，本人已经在项目中使用该选择器很多次，节省了大量 css 样式代码编写。

来看个例子就能知道为什么如此有用

```html
<header>
   <p></p>
</header>
<main>
   <p></p>
</main>
<footer>
   <p></p>
</footer>
```

在上面这个 html 结构中，如果要选择 header，main 以及 footer 下面的 p 标签，你会如何做？

大多数人在借助预处理器语言的情况下，会编写出这样的代码。

```scss
header, footer, footer {
    p {
        // 
    }
}
```

这样写，当然没问题，但是原生的 `:is()` 选择器能够更优雅实现

```css
:is(header, main, footer) p {
    /*  */
}
```

下面是用 `:is()` 选择器实现的上面的示例

<isExampleComponent />

这里的 `is()` 伪类选择器会匹配选择器列表中的任意一个可匹配的元素并找到该元素的后代元素 p 应用样式规则。

怎么样，看起来是不是很有用呢？

需要，注意的是 `:is()` 选择器的权重值为参数列表中取权重值最高的那个。

```css
:is(#app, .app, main) {
    /* 这个 :is 选择器的权重为 100，因为这个参数列表中，id选择器权重值最高 */
}
```

:::danger
`:is()` 伪类选择器不能接收伪元素作为参数列表。所以这样不行：

```css
p:is(::before, ::after) {
    font-size: 10em;
}
```
:::

## `:where()`

先看下兼容性表格。

| 伪类选择器 |             chrome             | firefox                        | safari                         |
| ---------- | :----------------------------: | ------------------------------ | ------------------------------ |
| `:has()`   |           **>=105**            | 目前仍部分不支持（**113**）    | **>=15.4**                     |
| `:where()` |            **>=88**            | **>=111**                      | **>=14**                       |
| `:is()`    | **>=88(不包含 `-webkit-any`)** | **>=78(不包含 `-webkit-any`)** | **>=14(不包含 `-webkit-any`)** |

目前除了 `:has` 选择器在 firefox 中仍然不被支持外，其他两个都已经全部支持了。
